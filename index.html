<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Kilo Core</title>
  <script src="src/kilo-core.js"></script>
  <script>
    // make a function that tests out some utility methods
    // FIXME: when a non-existent element dependency is requested, causes errors
    register('testFunc', ['Util'], function(Util) {
      'use strict';

      Util.log('TestFunc() was resolved');

      return function(message) {
        Util.log('TestFunc() was called! ' + message);

        // create HTML elements that will output results of Util methods
        use(['isdefined'], function(isDefined) {
          isDefined.textContent = Util.isDefined(0); 
        });

        use(['isobject', 'isboolean', 'isnumber'], function(isObject, isBoolean, isNumber) {
          isObject.textContent = Util.isObject({});
          isBoolean.textContent = Util.isBoolean(false);
          isNumber.textContent = Util.isNumber('abc');
        });

        use(['getgid1', 'getgid2', 'def'], function(getGID1, getGID2, def) {
          getGID1.textContent = Util.getGID('myid');
          getGID2.textContent = Util.getGID('myid');
          def.textContent = Util.def(undefined, 'This is a defined value');
        });

        // demonstrates a container element with sub elements
        use(['container[]', 'element'], function(Containers, element) {
          Containers.forEach(function(Container) {
            element('sub[]', Container, function(Subs) {
              Subs.forEach(function(Sub) {
                Sub.textContent = Container.getAttribute('data-msg') + ': ' + Sub.getAttribute('data-msg');
              });
            });
          });
        });
      };
    });

    // inject the newly created TestFunc and call it
    use(['testFunc'], function(testFunc) {
      'use strict';

      testFunc('Yo dawg!');
    });
  </script>
</head>
<body>
  <h1>Kilo Core</h1>
  <div>isDefined(0): <span data-isdefined></span></div>
  <div>isObject({}): <span data-isobject></span></div>
  <div>isBoolean(false): <span data-isboolean></span></div>
  <div>isNumber('abc'): <span data-isnumber></span></div>
  <div>getGID('myid'): <span data-getgid1></span></div>
  <div>getGID('myid'): <span data-getgid2></span></div>
  <div>def(undefined, 'This is a defined value'): <span data-def></span></div>
  <div data-container data-msg="I'm container 1">
    <div>
      <div data-sub data-msg="Sub Element 1"></div>
      <div data-sub data-msg="Sub Element 2"></div>
    </div>
  </div>
  <div data-container data-msg="I'm container 2">
    <div>
      <div data-sub data-msg="Sub Element 3"></div>
      <div data-sub data-msg="Sub Element 4"></div>
    </div>
  </div>
</body>
</html>