<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Kilo Core</title>
</head>
<body>
  <h1>Kilo Core</h1>
  <div>isDefined(0): <span data-isdefined></span></div>
  <div>isObject({}): <span data-isobject></span></div>
  <div>isBoolean(false): <span data-isboolean></span></div>
  <div>isNumber('abc'): <span data-isnumber></span></div>
  <div>def(undefined, 'This is a defined value'): <span data-def></span></div>
  <div data-container data-msg="I'm container 1">
    <div>
      <div data-sub data-msg="Sub Element 1"></div>
      <div data-sub data-msg="Sub Element 2"></div>
    </div>
  </div>
  <div data-container data-msg="I'm container 2">
    <div>
      <div data-sub data-msg="Sub Element 3"></div>
      <div data-sub data-msg="Sub Element 4"></div>
    </div>
  </div>
  <span data-output></span>
</body>
  <script src="dist/kilo.min.js"></script>
  <script>
    // make a function that tests out some utility methods
    // FIXME: when a non-existent element dependency is requested, causes errors
    register('testFunc', ['Util'], function(Util) {
      'use strict';

      Util.log('TestFunc() was resolved');

      return function(message) {
        Util.log('TestFunc() was called! ' + message);

        // create HTML elements that will output results of Util methods
        use('isdefined', function(isDefined) {
          isDefined.textContent = Util.isDefined(0); 
        });

        use(['isobject', 'isboolean', 'isnumber'], function(isObject, isBoolean, isNumber) {
          isObject.textContent = Util.isObject({});
          isBoolean.textContent = Util.isBoolean(false);
          isNumber.textContent = Util.isNumber('abc');
        });

        // demonstrates a container element with sub elements
        use(['container[]', 'element'], function(Containers, element) {
          Containers.forEach(function(Container) {
            element('sub[]', Container, function(Subs) {
              Subs.forEach(function(Sub) {
                Sub.textContent = Container.getAttribute('data-msg') + ': ' + Sub.getAttribute('data-msg');
              });
            });
          });
        });
      };
    });

    // inject the newly created TestFunc and call it
    use('testFunc', function(testFunc) {
      'use strict';

      testFunc('Yo dawg!');
    });

    // get the content of an external file and output it
    use(['./data/hello.txt', 'output'], function(hello, output) {
      output.textContent = hello;
    });

    // get json content (using full resource URL)
    use(location.href + 'data/foo.json', function(foo) {
      console.log(foo.bar);
    });
  </script>
</html>