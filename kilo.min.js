!function(){"use strict";function n(n){var r=n.lastIndexOf(".");return r>-1&&n.indexOf("/")<0?n.substr(r+1):n}function r(n){var r=n.lastIndexOf(".");return n.indexOf("/")<0&&r>-1?n.substr(0,r):"_"}function e(){function e(n){for(var r,e=0;e<c.length;e++){var t=c[e];if(r=n.match(t.pattern))return{name:r[1],cb:t.cb}}return{name:n}}function t(n,r,e){var t=f[n];if(!t)return void e(void 0);if("*"==r){var o=[];for(var u in t)o.push(t[u]);return void i(o,e,{})}return t[r]?void i([t[r]],function(n){e(n[r])},{}):void e(void 0)}function i(n,r,e){var t=n.shift();return t?t.resolved?(e[t.name]=t.resolved,void i(n,r,e)):void s(t.deps,function(o){e[t.name]=t.resolved=t.func.apply(l,o),i(n,r,e)},[]):void r(e)}function s(t,o,i){if(!t)return void o();var u=t.shift();if(!u)return void o(i);var a=r(u),f=e(n(u));d(a,f.name,l.handlers.slice(0),function(n){f.cb&&(n=f.cb(n)),i.push(n),s(t,o,i)})}function d(n,r,e,t){var o=e.shift();return o?void o(n,r,function(o){return o?void t(o):void d(n,r,e,t)}):void t()}var f={_:{}},c=[],l={register:function(e,t,o){a.isFunction(t)&&(o=t,t=[]);var i=r(e),u=n(e);return f[i]||(f[i]={}),f[i][u]={ns:i,name:u,deps:t,func:o,resolved:null},this},use:function(n,r){var e;return a.isString(n)&&(n=[n]),a.isArray(n)?r?void setTimeout(function(){s(n.slice(0),function(n){r.apply(l,n)},[])},1):(s(n.slice(0),function(n){e=n[0]},[]),e):void 0},add:function(n,r,e){return e=e||"_",f[e][n]={ns:e,name:n,resolved:r},this},unresolve:function(n,r){r=r||"_",f[r]&&f[r][n]&&(f[r][n].resolved=null)},addInterceptor:function(n,r){return c.push({pattern:n,cb:r}),this},handlers:[t,u,o]};return l.register.lib=l.add,l}function t(n,r){return"application/json"==n.substr(0,16)?JSON.parse(r):r}function o(n,r,e){if(r.indexOf("/")<0)return void e();var o=new XMLHttpRequest;o.onerror=function(){a.error("Network error.")},o.onload=function(){var n=n||this.getResponseHeader("content-type")||"";this.status>=300?e():e(t(n,this.responseText),this.status)},o.open("get",r,!0),o.send()}function i(n){return n=n?n.querySelectorAll("*"):document.getElementsByTagName("html"),n[0]?n[0].querySelectorAll("*"):void 0}function u(n,r,e,t){var o=[],u=i(t);if(!u)return void e();var s=r.indexOf("[]");-1!=s&&(r=r.substring(0,s));for(var a=0,d=u.length;d>a;a++){var f=u[a];f.hasAttribute("data-"+r)&&o.push(f)}e(-1===s?o[0]:0==o.length?void 0:o)}for(var s="kilo",a={isDefined:function(n){return"undefined"!=typeof n},def:function(n,r){return"undefined"==typeof n?r:n},error:function(n){throw new Error(s+": "+n)},warn:function(n){a.log("Warning: "+n)},log:function(n){c.log&&console.log(s+": "+n)},argsToArray:function(n){return Array.prototype.slice.call(n)},rand:function(n,r){return r=r||0,r>n&&a.error("rand: invalid range."),Math.floor(Math.random()*(n-r+1))+r}},d=["Array","Object","Boolean","Arguments","Function","String","Number","Date","RegExp"],f=0;f<d.length;f++)a["is"+d[f]]=function(n){return function(r){return Object.prototype.toString.call(r)=="[object "+n+"]"}}(d[f]);var c={log:!0},l=e();return l.add("Injector",l).add("Util",a).add("element",u),"undefined"!=typeof exports?(exports.register=l.register,exports.use=l.use):(window.register||(window.register=l.register),window.use||(window.use=l.use)),c}();