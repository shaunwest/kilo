!function(e){function n(e,n){for(var t,r=0;r<e.length;r++){var o=e[r];if(t=n.match(o.pattern))return{key:t[1],cb:o.cb}}return{key:n}}function t(e,n){return n?n(e):e}function r(){var e=document.getElementsByTagName("html");if(e[0])return e[0].querySelectorAll("*")}function o(e,n,t){var o=[],i=n?n.querySelectorAll("*"):r(),s=e.indexOf("[]");-1!=s&&(e=e.substring(0,s));for(var u=0,c=i.length;c>u;u++){var a=i[u];a.hasAttribute("data-"+e)&&o.push(a)}t(-1===s?o[0]:o)}function i(e,n){var t="application/json";switch(e){case t:case t+"; charset=utf-8":return JSON.parse(n);default:return n}}function s(e,n){var t=new XMLHttpRequest;t.onerror=function(){a.error("Network error.")},t.onload=function(){var e=e||this.getResponseHeader("content-type");this.status>=400?n(this.statusText,this.status):n(i(e,this.responseText),this.status)},t.open("get",e,!0),t.send()}function u(e,n,t,r){a.isArray(n)&&a.isFunction(t)?d.register(e,n,t,r):a.isFunction(n)&&d.register(e,[],n,t)}for(var c,a={isDefined:function(e){return"undefined"!=typeof e},def:function(e,n){return"undefined"==typeof e?n:e},error:function(n){throw new Error(e+": "+n)},warn:function(e){a.log("Warning: "+e)},log:function(n){p.log&&console.log(e+": "+n)},argsToArray:function(e){return Array.prototype.slice.call(e)},rand:function(e,n){return n=n||0,n>e&&a.error("rand: invalid range."),Math.floor(Math.random()*(e-n+1))+n}},l=["Array","Object","Boolean","Arguments","Function","String","Number","Date","RegExp"],f=0;f<l.length;f++)a["is"+l[f]]=function(e){return function(n){return Object.prototype.toString.call(n)=="[object "+e+"]"}}(l[f]);var d={unresolved:{},modules:{Util:a,element:o,httpGet:s},interceptors:[],register:function(e,n,t,r){return this.unresolve(e),this.unresolved[e]={deps:n,func:t,scope:r},this},unresolve:function(e){return this.modules[e]&&delete this.modules[e],this},getDependency:function(e,r){var i=n(this.interceptors,e);e=i.key;var s=this.modules,u=s[e];return u?void r(t(u,i.cb)):e.indexOf("/")>-1?void s.httpGet(e,r):(u=this.unresolved[e])?(a.log("Resolving for '"+e+"'"),void this.resolveAndApply(u.deps,u.func,u.scope,function(n){r(s[e]=t(n,i.cb))})):void o(e,0,function(n){n?r(n=t(n,i.cb)):a.warn("'"+e+"' not found")})},resolve:function(e,n,t,r){var o=this,i=e[t];return i?void this.getDependency(i,function(s){s?r.push(s):a.error("Can't resolve "+i),o.resolve(e,n,t+1,r)}):void n(r)},apply:function(e,n,t){return n.apply(t||p,e)},resolveAndApply:function(e,n,t,r){var o=this;this.resolve(e,function(e){var i=o.apply(e,n,t);r&&a.isFunction(r)&&r(i)},0,[])},addInterceptor:function(e,n){this.interceptors.push({pattern:e,cb:n})}},p={use:function(e,n,t,r){var o;if(a.isFunction(e)){var i=d.apply([],e,n);r&&r(i)}return a.isString(e)&&(e=[e]),a.isArray(e)&&(n?d.resolveAndApply(e,n,t,r):d.resolveAndApply(e,function(e){o=e})),o},register:function(e,n,t,r){return a.isFunction(n)||a.isFunction(t)?u(e,n,t,r):void 0},unresolve:function(e){d.unresolve(e)},noConflict:function(){return window[e]=c,p}};return p.log=!0,d.modules.Injector=d,"undefined"!=typeof window&&(c=window[e],window[e]=p,window.register||(window.register=p.register),window.use||(window.use=p.use)),"undefined"!=typeof exports&&(exports[e]=p,exports.register=p.register,exports.use=p.use),p}("kilo");