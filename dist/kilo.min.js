!function(n){function e(n,e){for(var t,r=0;r<n.length;r++){var o=n[r];if(t=e.match(o.pattern))return{key:t[1],cb:o.cb}}return{key:e}}function t(n,e){return e?e(n):n}function r(){var n=document.getElementsByTagName("html");if(n[0])return n[0].querySelectorAll("*")}function o(n,e,t){var o,i=[],u=e?e.querySelectorAll("*"):r(),s=n.indexOf("[]");-1!=s&&(n=n.substring(0,s));for(var c=0,a=u.length;a>c;c++)o=u[c],o.hasAttribute("data-"+n)&&i.push(o);t(-1===s?i[0]:i)}function i(n,e){var t="application/json";switch(n){case t:case t+"; charset=utf-8":return JSON.parse(e);default:return e}}function u(n,e){var t=new XMLHttpRequest;t.onerror=function(){a.error("Network error.")},t.onload=function(){var n=n||this.getResponseHeader("content-type");this.status>=400?e(this.statusText,this.status):e(i(n,this.responseText),this.status)},t.open("get",n,!0),t.send()}function s(n,e,t,r){a.isArray(e)&&a.isFunction(t)?d.register(n,e,t,r):a.isFunction(e)&&d.register(n,[],e,t)}for(var c,a={isDefined:function(n){return"undefined"!=typeof n},isBoolean:function(n){return"boolean"==typeof n},def:function(n,e){return"undefined"==typeof n?e:n},error:function(e){throw new Error(n+": "+e)},warn:function(n){a.log("Warning: "+n)},log:function(e){p.log&&console.log(n+": "+e)},argsToArray:function(n){return Array.prototype.slice.call(n)},rand:function(n,e){return e=e||0,(e>n||e>n)&&a.error("rand: invalid range."),Math.floor(Math.random()*(n-e+1))+e}},f=["Array","Object","Arguments","Function","String","Number","Date","RegExp"],l=0;l<f.length;l++)a["is"+f[l]]=function(n){return function(e){return Object.prototype.toString.call(e)=="[object "+n+"]"}}(f[l]);var d={unresolved:{},modules:{Util:a,element:o,httpGet:u},interceptors:[],register:function(n,e,t,r){return this.unresolve(n),this.unresolved[n]={deps:e,func:t,scope:r},this},unresolve:function(n){return this.modules[n]&&delete this.modules[n],this},setModule:function(n,e){return this.modules[n]=e,this},getDependency:function(n,r){var i=e(this.interceptors,n);n=i.key;var u=this.modules,s=u[n];return s?void r(t(s,i.cb)):n.indexOf("/")>-1?void u.httpGet(n,r):(s=this.unresolved[n])?(a.log("Resolving for '"+n+"'"),void this.resolveAndApply(s.deps,s.func,s.scope,function(e){r(u[n]=t(e,i.cb))})):void o(n,0,function(e){e?r(e=t(e,i.cb)):a.warn("'"+n+"' not found")})},resolve:function(n,e,t,r){var o=this,i=n[t];return i?void this.getDependency(i,function(u){u?r.push(u):a.error("Can't resolve "+i),o.resolve(n,e,t+1,r)}):void e(r)},apply:function(n,e,t){var r=e.apply(t||p,n);return r},resolveAndApply:function(n,e,t,r){var o=this;this.resolve(n,function(n){var i=o.apply(n,e,t);r&&a.isFunction(r)&&r(i)},0,[])},addInterceptor:function(n,e){this.interceptors.push({pattern:n,cb:e})}},p={use:function(n,e,t,r){if(a.isFunction(n)){var o=d.apply([],n,e);r&&r(o)}a.isString(n)&&(n=[n]),a.isArray(n)&&d.resolveAndApply(n,e,t,r)},register:function(n,e,t,r){return a.isFunction(e)||a.isFunction(t)?s(n,e,t,r):void 0},unresolve:function(n){d.unresolve(n)},noConflict:function(){return window[n]=c,p}};return p.use.run=function(n,e){var t,r,o;return function(){var i=arguments;return p.use(n,function(n){return a.isFunction(n)?(o=n.apply(null,i),t&&t(o),r=!0,o):void 0},e),{on:function(n){r?n(o):t=n}}}},p.log=!0,d.setModule("Injector",d),"undefined"!=typeof window&&(window[n]&&(c=window[n]),window[n]=p,window.register||(window.register=p.register),window.use||(window.use=p.use)),"undefined"!=typeof exports&&(exports[n]=p,exports.register=p.register,exports.use=p.use),p}("kilo");