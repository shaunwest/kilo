!function(e){"use strict";function n(e,n){var t,r,o;for(t=0;t<e.length;t++)if(r=e[t],o=n.match(r.pattern))return{key:o[1],cb:r.cb};return null}function t(e,n){return n?n(e):e}function r(e){var n;e&&("complete"===document.readyState?e(document):n=setInterval(function(){"complete"===document.readyState&&(e(document),clearInterval(n))},10))}function o(e){var n;if(l.isObject(e))for(n in e)e.hasOwnProperty(n)&&f.register(n,[],function(e){return function(){return e}}(e[n]))}function i(e,n,t){r(function(r){var o,i,u,s,c,a=[];if(n)s=n.querySelectorAll("*");else{if(!p){if(n=r.getElementsByTagName("body"),!n||!n[0])return;p=n[0].querySelectorAll("*")}s=p}for(c=e.indexOf("[]"),-1!==c&&(e=e.substring(0,c)),o=0,i=s.length;i>o;o++)u=s[o],u.hasAttribute("data-"+e)&&a.push(u);t(-1===c?a[0]:a)})}function u(e,n){switch(e){case"application/json":case"application/json; charset=utf-8":return JSON.parse(n);default:return n}}function s(e,n,t){var r=new XMLHttpRequest;t&&r.addEventListener("progress",function(e){t(e.loaded,e.total)},!1),r.onerror=function(){l.error("Network error.")},r.onload=function(){var e=e||this.getResponseHeader("content-type");switch(this.status){case 500:case 404:n(this.statusText,this.status);break;case 304:default:n(u(e,this.responseText),this.status)}},r.open("get",e,!0),r.send()}function c(e,n,t,r){l.isArray(n)&&l.isFunction(t)?f.register(e,n,t,r):l.isFunction(n)&&f.register(e,[],n,t)}var a,l,f,d,p,g={},v={},h=void 0,y=e;l={isDefined:function(e){return"undefined"!=typeof e},isBoolean:function(e){return"boolean"==typeof e},def:function(e,n){return"undefined"==typeof e?n:e},error:function(e){throw new Error(y+": "+e)},warn:function(e){l.log("Warning: "+e)},log:function(e){a.log&&console.log(y+": "+e)},argsToArray:function(e){return Array.prototype.slice.call(e)},getGID:function(e){return e=l.def(e,""),v[e]=l.def(v[e],0),e+ ++v[e]},rand:function(e,n){return n=n||0,(n>e||n>e)&&l.error("rand: invalid range."),Math.floor(Math.random()*(e-n+1))+n}},d=["Array","Object","Arguments","Function","String","Number","Date","RegExp","HTMLImageElement"];for(var w=0;w<d.length;w++)l["is"+d[w]]=function(e){return function(n){return Object.prototype.toString.call(n)==="[object "+e+"]"}}(d[w]);return f={unresolved:{},modules:{},interceptors:[],register:function(e,n,t,r){return this.unresolve(e),this.unresolved[e]={deps:n,func:t,scope:r},this},unresolve:function(e){return this.modules[e]&&delete this.modules[e],this},setModule:function(e,n){return this.modules[e]=n,this},getDependency:function(e,r){var o,u,c,a;return c=n(this.interceptors,e),c&&(a=c.cb,e=c.key),o=this.modules,(u=o[e])?(u=t(u,a),void r(u)):-1!=e.indexOf("/")?void s(e,r):(u=this.unresolved[e])?(l.log("Resolving dependencies for '"+e+"'"),void this.resolveAndApply(u.deps,u.func,u.scope,function(n){l.isObject(n)&&(n.getType=function(){return e}),o[e]=n,n=t(n,a),r(n)})):void i(e,null,function(n){n?(n=t(n,a),r(n)):l.warn("Module '"+e+"' not found")})},resolve:function(e,n,t,r){var o,i=this;return t=l.def(t,0),(o=e[t])?void this.getDependency(o,function(u){r||(r=[]),u?r.push(u):l.error("Can't resolve "+o),i.resolve(e,n,t+1,r)}):void n(r)},apply:function(e,n,t){var r=n.apply(t||a,e);return r},resolveAndApply:function(e,n,t,r){var o=this;this.resolve(e,function(e){var i=o.apply(e,n,t);r&&l.isFunction(r)&&r(i)})},addInterceptor:function(e,n){this.interceptors.push({pattern:e,cb:n})},process:function(e,n){var t,r,o;if(l.isArray(e))for(t=0,r=e.length;r>t;t++)o=e[t],l.isString(o)?this.getDependency(o,function(e){n(e)}):n(o);else l.isString(e)?this.getDependency(e,function(e){n(e)}):n(e)}},a=function(){},a.use=function(e,n,t,r){var o;l.isString(e)?f.resolveAndApply([e],n,t,r):l.isArray(e)?f.resolveAndApply(e,n,t,r):l.isFunction(e)&&(o=f.apply([],e,n),r&&r(o))},a.use.defer=function(e,n,t){return function(r){a.use(e,n,t,r)}},a.use.run=function(e,n){var t,r,o,i=function(){var i=arguments;return a.use(e,function(e){return l.isFunction(e)?(o=e.apply(null,i),t&&t(o),r=!0,o):void 0},n),{on:function(e){r?e(o):t=e}}};return i},a.register=function(e,n,t,r){return l.isFunction(n)||l.isFunction(t)?c(e,n,t,r):{depends:function(){return n=l.argsToArray(arguments),this},factory:function(t,r){c(e,n,t,r)}}},a.unresolve=function(e){f.unresolve(e)},a.noConflict=function(){return window[e]=h,a},a.onDocumentReady=r,a.log=!0,f.setModule("Util",l).setModule("Injector",f).setModule("element",i).setModule("registerAll",o).setModule("httpGet",s).setModule("appConfig",g),window[e]&&(l.warn("a preexisting value at namespace '"+e+"' has been overwritten."),h=window[e]),window[e]=a,window.register||(window.register=a.register),window.use||(window.use=a.use),a}("kilo");