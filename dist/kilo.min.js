!function(e){"use strict";function n(e,n){var t,r,o;for(t=0;t<e.length;t++)if(r=e[t],o=n.match(r.pattern))return{key:o[1],cb:r.cb};return null}function t(e,n){return n?n(e):e}function r(e){var n;e&&("complete"===document.readyState?e(document):n=setInterval(function(){"complete"===document.readyState&&(e(document),clearInterval(n))},10))}function o(e){var n;if(f.isObject(e))for(n in e)e.hasOwnProperty(n)&&l.register(n,[],function(e){return function(){return e}}(e[n]))}function i(e,n,t){r(function(r){var o,i,u,s,c,a=[];if(n)s=n.querySelectorAll("*");else{if(!p){if(n=r.getElementsByTagName("body"),!n||!n[0])return;p=n[0].querySelectorAll("*")}s=p}for(c=e.indexOf("[]"),-1!==c&&(e=e.substring(0,c)),o=0,i=s.length;i>o;o++)u=s[o],u.hasAttribute("data-"+e)&&a.push(u);t(-1===c?a[0]:a)})}function u(e,n){switch(e){case"application/json":case"application/json; charset=utf-8":return JSON.parse(n);default:return n}}function s(e,n,t){var r=new XMLHttpRequest;t&&r.addEventListener("progress",function(e){t(e.loaded,e.total)},!1),r.onerror=function(){f.error("Network error.")},r.onload=function(){var e=e||this.getResponseHeader("content-type");switch(this.status){case 500:case 404:n(this.statusText,this.status);break;case 304:default:n(u(e,this.responseText),this.status)}},r.open("get",e,!0),r.send()}function c(e,n,t,r){f.isArray(n)&&f.isFunction(t)?l.register(e,n,t,r):f.isFunction(n)&&l.register(e,[],n,t)}var a,f,l,d,p,g={},v=void 0,h=e;f={isDefined:function(e){return"undefined"!=typeof e},isBoolean:function(e){return"boolean"==typeof e},def:function(e,n){return"undefined"==typeof e?n:e},error:function(e){throw new Error(h+": "+e)},warn:function(e){f.log("Warning: "+e)},log:function(e){a.log&&console.log(h+": "+e)},argsToArray:function(e){return Array.prototype.slice.call(e)},getGID:function(e){return e=f.def(e,""),g[e]=f.def(g[e],0),e+ ++g[e]},rand:function(e,n){return n=n||0,(n>e||n>e)&&f.error("rand: invalid range."),Math.floor(Math.random()*(e-n+1))+n}},d=["Array","Object","Arguments","Function","String","Number","Date","RegExp","HTMLImageElement"];for(var y=0;y<d.length;y++)f["is"+d[y]]=function(e){return function(n){return Object.prototype.toString.call(n)==="[object "+e+"]"}}(d[y]);return l={unresolved:{},modules:{},interceptors:[],register:function(e,n,t,r){return this.unresolve(e),this.unresolved[e]={deps:n,func:t,scope:r},this},unresolve:function(e){return this.modules[e]&&delete this.modules[e],this},setModule:function(e,n){return this.modules[e]=n,this},getDependency:function(e,r){var o,u,c,a;return c=n(this.interceptors,e),c&&(a=c.cb,e=c.key),o=this.modules,(u=o[e])?(u=t(u,a),void r(u)):-1!=e.indexOf("/")?void s(e,r):(u=this.unresolved[e])?(f.log("Resolving dependencies for '"+e+"'"),void this.resolveAndApply(u.deps,u.func,u.scope,function(n){f.isObject(n)&&(n.getType=function(){return e}),o[e]=n,n=t(n,a),r(n)})):void i(e,null,function(n){n?(n=t(n,a),r(n)):f.warn("Module '"+e+"' not found")})},resolve:function(e,n,t,r){var o=this;t=f.def(t,0);var i=e[t];return i?void this.getDependency(i,function(u){r||(r=[]),u?r.push(u):f.error("Can't resolve "+i),o.resolve(e,n,t+1,r)}):void n(r)},apply:function(e,n,t){var r=n.apply(t||a,e);return r},resolveAndApply:function(e,n,t,r){var o=this;this.resolve(e,function(e){var i=o.apply(e,n,t);r&&f.isFunction(r)&&r(i)})},addInterceptor:function(e,n){this.interceptors.push({pattern:e,cb:n})},process:function(e,n){var t,r,o;if(f.isArray(e))for(t=0,r=e.length;r>t;t++)o=e[t],f.isString(o)?this.getDependency(o,function(e){n(e)}):n(o);else f.isString(e)?this.getDependency(e,function(e){n(e)}):n(e)}},a=function(){},a.use=function(e,n,t,r){var o;f.isString(e)?l.resolveAndApply([e],n,t,r):f.isArray(e)?l.resolveAndApply(e,n,t,r):f.isFunction(e)&&(o=l.apply([],e,n),r&&r(o))},a.use.defer=function(e,n,t){return function(r){a.use(e,n,t,r)}},a.use.run=function(e,n){var t,r,o,i=function(){var i=arguments;return a.use(e,function(e){return f.isFunction(e)?(o=e.apply(null,i),t&&t(o),r=!0,o):void 0},n),{on:function(e){r?e(o):t=e}}};return i},a.register=function(e,n,t,r){return f.isFunction(n)||f.isFunction(t)?c(e,n,t,r):{depends:function(){return n=f.argsToArray(arguments),this},factory:function(t,r){c(e,n,t,r)}}},a.unresolve=function(e){l.unresolve(e)},a.noConflict=function(){return window[e]=v,a},a.onDocumentReady=r,a.log=!0,l.setModule("Util",f).setModule("Injector",l).setModule("element",i).setModule("registerAll",o).setModule("httpGet",s),"undefined"!=typeof window&&(window[e]&&(f.warn("a preexisting value at namespace '"+e+"' has been overwritten."),v=window[e]),window[e]=a,window.register||(window.register=a.register),window.use||(window.use=a.use)),"undefined"!=typeof exports&&(exports[e]=a,exports.register=a.register,exports.use=a.use),a}("kilo");